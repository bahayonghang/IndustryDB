# IndustryDB æ–‡æ¡£å¼€å‘å·¥å…·
# ä½¿ç”¨ just å‘½ä»¤è¿è¡Œå„ç§æ–‡æ¡£ç›¸å…³ä»»åŠ¡

# é»˜è®¤ä»»åŠ¡ï¼šæ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å‘½ä»¤
default:
    @just --list

# å®‰è£…æ–‡æ¡£ä¾èµ–
install:
    @echo "ğŸ“¦ å®‰è£…æ–‡æ¡£ä¾èµ–..."
    npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆä¸­æ–‡ï¼‰
dev-zh:
    @echo "ğŸš€ å¯åŠ¨ä¸­æ–‡æ–‡æ¡£å¼€å‘æœåŠ¡å™¨..."
    npm run docs:dev -- --host 0.0.0.0

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆè‹±æ–‡ï¼‰
dev-en:
    @echo "ğŸš€ å¯åŠ¨è‹±æ–‡æ–‡æ¡£å¼€å‘æœåŠ¡å™¨..."
    npm run docs:dev -- --host 0.0.0.0

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆé»˜è®¤ï¼‰
dev: dev-zh

# æ„å»ºæ–‡æ¡£
build:
    @echo "ğŸ—ï¸  æ„å»ºæ–‡æ¡£..."
    npm run docs:build

# é¢„è§ˆæ„å»ºçš„æ–‡æ¡£
preview:
    @echo "ğŸ‘ï¸  é¢„è§ˆæ„å»ºçš„æ–‡æ¡£..."
    npm run docs:preview -- --host 0.0.0.0

# æ¸…ç†æ„å»ºäº§ç‰©
clean:
    @echo "ğŸ§¹ æ¸…ç†æ„å»ºäº§ç‰©..."
    rm -rf .vitepress/dist
    rm -rf .vitepress/cache
    rm -rf node_modules

# å®Œæ•´çš„å¼€å‘æµç¨‹ï¼šå®‰è£…ä¾èµ–
start: install

# å®Œæ•´çš„æ„å»ºæµç¨‹ï¼šæ¸…ç† -> å®‰è£… -> æ„å»º
release: clean install build

# æ£€æŸ¥é“¾æ¥
check:
    @echo "ğŸ” æ£€æŸ¥æ–‡æ¡£é“¾æ¥..."
    npm run docs:build

# æ ¼å¼åŒ–æ–‡æ¡£
fmt:
    @echo "âœ¨ æ ¼å¼åŒ– Markdown æ–‡æ¡£..."
    find . -name "*.md" -type f -not -path "./node_modules/*" -not -path "./.vitepress/*" | xargs prettier --write

# å¿«é€Ÿå¯åŠ¨ï¼ˆè·³è¿‡å®‰è£…æ£€æŸ¥ï¼‰
quick:
    @echo "âš¡ å¿«é€Ÿå¯åŠ¨å¼€å‘æœåŠ¡å™¨..."
    npm run docs:dev -- --host 0.0.0.0

# éƒ¨ç½²å‡†å¤‡
deploy-prep: clean install build
    @echo "âœ… éƒ¨ç½²åŒ…å‡†å¤‡å®Œæˆï¼"
    @echo "ğŸ“ æ„å»ºäº§ç‰©ä½äº: .vitepress/dist"

# å¸®åŠ©ä¿¡æ¯
help:
    @echo "IndustryDB æ–‡æ¡£å¼€å‘å·¥å…·"
    @echo ""
    @echo "å¸¸ç”¨å‘½ä»¤ï¼š"
    @echo "  just install     - å®‰è£…ä¾èµ–"
    @echo "  just start       - å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰"
    @echo "  just dev         - å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆä¸­æ–‡ï¼Œé»˜è®¤ï¼‰"
    @echo "  just dev-en      - å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆè‹±æ–‡ï¼‰"
    @echo "  just build       - æ„å»ºç”Ÿäº§ç‰ˆæœ¬"
    @echo "  just preview     - é¢„è§ˆæ„å»ºç»“æœ"
    @echo "  just clean       - æ¸…ç†æ„å»ºäº§ç‰©"
    @echo ""
    @echo "å®Œæ•´æµç¨‹ï¼š"
    @echo "  just release     - æ¸…ç†ã€å®‰è£…ã€æ„å»º"
    @echo "  just deploy-prep - å‡†å¤‡éƒ¨ç½²åŒ…"
    @echo ""
    @echo "å…¶ä»–ï¼š"
    @echo "  just check       - æ£€æŸ¥æ–‡æ¡£é“¾æ¥"
    @echo "  just fmt         - æ ¼å¼åŒ–æ–‡æ¡£"
    @echo "  just quick       - å¿«é€Ÿå¯åŠ¨ï¼ˆè·³è¿‡å®‰è£…ï¼‰"
